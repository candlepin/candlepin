description = 'Candlepin Common'

apply plugin: Msgfmt
apply plugin: Gettext

msgfmt {
    resource "${project.group}.common.i18n.Messages"
}

// Add the source files generated by the msgfmt plugin
// TODO make the msgfmt plugin add this sourceset to the project directly
sourceSets {
    main {
        java {
            srcDirs "${project.buildDir}/msgfmt/generated_source"
        }
    }
}


// Exclude the generated i18n translation files from checkstyle
tasks.withType(Checkstyle) {
    exclude '**/i18n/Messages*'
}



test {
    useJUnitPlatform()
}


configurations {
    compile {
        extendsFrom(commons, guice, jackson, javax, liquibase,
                logging_deps, oauth, resteasy, collections)
    }
    testCompile {
        extendsFrom(core_testing,liquibase_slf4j, jukito)
    }
}

dependencies {
    compile 'com.googlecode.gettext-commons:gettext-commons:0.9.8'

    compile(group: 'javax.servlet', name: 'servlet-api', version:'2.5') {
        exclude(module: '*')
    }
    compile(group: 'javax.validation', name: 'validation-api', version:'1.0.0.GA') {
        exclude(module: '*')
    }
}
